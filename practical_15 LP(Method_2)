// Code for FIFO (First-In-First-Out) Page Replacement Algorithm in Java

import java.util.HashSet;
import java.util.LinkedList;
import java.util.Queue;

class Main {

    public static void main(String args[]) {
        
        // The sequence of pages that need to be loaded (reference string)
        int incomingStream[] = {7, 0, 1, 2, 0 , 3, 0, 4, 2, 3, 0, 3, 2, 1};

        int pageFaults = 0; // Count total number of page faults
        int frames = 3;     // Total number of frames available in memory
        int m, n, s, pages;

        // Find total number of pages in the incoming stream
        pages = incomingStream.length;

        // Display table header for output visualization
        System.out.println("Incoming \t Frame 1 \t Frame 2 \t Frame 3");

        // Temporary array to represent the 3 memory frames
        int temp[] = new int[frames];

        // Initialize all frames to -1 (meaning empty)
        for (m = 0; m < frames; m++) {
            temp[m] = -1;
        }

        // Loop through each page in the reference string
        for (m = 0; m < pages; m++) {
            s = 0; // Flag to check if page already exists in any frame

            // Check if the current page already exists in memory
            for (n = 0; n < frames; n++) {
                if (incomingStream[m] == temp[n]) {
                    s++;           // Page already exists → page hit
                    pageFaults--;  // Adjust count (we will increment it later)
                }
            }

            // Increase pageFaults for each iteration (default assumption)
            pageFaults++;

            // If there are still empty frames and page is not in memory
            if ((pageFaults <= frames) && (s == 0)) {
                temp[m] = incomingStream[m];  // Fill next empty frame
            }
            // If all frames are full and page is not found → replace oldest page
            else if (s == 0) {
                // FIFO Replacement: (pageFaults - 1) % frames decides which frame to replace
                temp[(pageFaults - 1) % frames] = incomingStream[m];
            }

            // Display current step
            System.out.println();
            System.out.print(incomingStream[m] + "\t\t\t"); // Print current page number

            // Print all frame contents
            for (n = 0; n < frames; n++) {
                if (temp[n] != -1)
                    System.out.print(temp[n] + "\t\t\t");
                else
                    System.out.print(" - \t\t\t"); // Empty frame
            }
        }

        // Print final number of page faults
        System.out.println("\nTotal Page Faults:\t" + pageFaults);
    }
}
