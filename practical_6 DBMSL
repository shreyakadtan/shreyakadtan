//create table
CREATE TABLE Library (
    rollno NUMBER(10),
    name VARCHAR2(50),
    bookname VARCHAR2(100)
);


CREATE TABLE Library_Audit (
    rollno NUMBER(10),
    name VARCHAR2(50),
    bookname VARCHAR2(100)
);


//Trigger
CREATE OR REPLACE TRIGGER libtrig
AFTER DELETE OR UPDATE ON Library
REFERENCING OLD AS o NEW AS n
FOR EACH ROW
BEGIN
    INSERT INTO Library_Audit
    VALUES(:o.rollno, :o.name, :o.bookname);
END;
/


//Insert sample data
INSERT INTO Library VALUES (1, 'Soham', 'DBMS');
INSERT INTO Library VALUES (2, 'Amit', 'Java');
COMMIT;

// Update and Delete
UPDATE Library SET bookname='Python' WHERE rollno=1;
DELETE FROM Library WHERE rollno=2;

// View audit log
SELECT * FROM Library_Audit;


show errors trigger Library_Audit;
