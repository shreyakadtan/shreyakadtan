//create table
CREATE TABLE student (
  rollno NUMBER(10) PRIMARY KEY,
  name VARCHAR2(20),
  total_marks NUMBER(5)
);

CREATE TABLE result (
  rollno NUMBER(10),
  name VARCHAR2(20),
  class VARCHAR2(30)
);


//insert into table
INSERT INTO student VALUES (13, 'a', 990);
INSERT INTO student VALUES (14, 'b', 900);
INSERT INTO student VALUES (4, 'c', 999);

INSERT INTO result VALUES (13, 'a', NULL);
INSERT INTO result VALUES (14, 'b', NULL);
INSERT INTO result VALUES (4, 'c', NULL);


//verify
SELECT * FROM student;
SELECT * FROM result;


//Create the Procedure
CREATE OR REPLACE PROCEDURE proc_grade(roll IN NUMBER)
AS
  t student.total_marks%TYPE;
BEGIN
  SELECT total_marks INTO t FROM student WHERE rollno = roll;

  IF (t BETWEEN 990 AND 1500) THEN
    UPDATE result SET class = 'Distinction' WHERE rollno = roll;
    DBMS_OUTPUT.PUT_LINE(roll || ' - Distinction');

  ELSIF (t BETWEEN 900 AND 989) THEN
    UPDATE result SET class = 'First Class' WHERE rollno = roll;
    DBMS_OUTPUT.PUT_LINE(roll || ' - First Class');

  ELSIF (t BETWEEN 825 AND 899) THEN
    UPDATE result SET class = 'Higher Second Class' WHERE rollno = roll;
    DBMS_OUTPUT.PUT_LINE(roll || ' - Higher Second Class');

  ELSE
    UPDATE result SET class = 'Pass' WHERE rollno = roll;
    DBMS_OUTPUT.PUT_LINE(roll || ' - Pass');
  END IF;

EXCEPTION
  WHEN NO_DATA_FOUND THEN
    DBMS_OUTPUT.PUT_LINE('No such roll number!');
END;
/


//Enable output display
SET SERVEROUTPUT ON;


//Run the procedure for each student
EXEC proc_grade(13);
EXEC proc_grade(14);
EXEC proc_grade(4);


//Verify the updates
SELECT * FROM result;
